/* ===== Theme tokens ===== */
:root{
  --bg: hsl(224 40% 98%);
  --bgImg: radial-gradient(1000px 700px at 10% -10%, hsl(225 100% 99%), transparent),
           radial-gradient(900px 500px at 90% -20%, hsl(210 100% 99%), transparent),
           linear-gradient(hsl(220 40% 98%), hsl(220 40% 98%));
  --surface: hsl(0 0% 100%);
  --surfGlass: hsl(0 0% 100% / .65);
  --surfGlassAlt: hsl(0 0% 100% / .55);
  --text: hsl(222 19% 16%);
  --muted: hsl(224 10% 40%);
  --outline: hsl(220 18% 86%);
  --accent: hsl(221 83% 53%);

  --hdrH: 64px;
  --tapeH: 32px;
  --radius: 14px;
  --shadow: 0 10px 30px hsl(220 35% 8% / .12);
  --glow: 0 0 0 0 hsl(210 100% 60% / .0);
}

html, body, #root { height: 100% }
* { box-sizing: border-box }
body {
  margin: 0;
  font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Inter, "Helvetica Neue", Arial;
  color: var(--text);
  background: var(--bg);
}

/* Dark */
html[data-theme="dark"]{
  --bg: hsl(240 6% 9%);
  --bgImg: radial-gradient(1200px 700px at 15% -10%, hsl(240 6% 12%), transparent),
           radial-gradient(1000px 600px at 85% -15%, hsl(240 6% 10%), transparent),
           linear-gradient(hsl(240 6% 9%), hsl(240 6% 9%));
  --surface: hsl(240 6% 13%);
  --surfGlass: hsl(240 6% 16% / .55);
  --surfGlassAlt: hsl(240 6% 14% / .45);
  --text: hsl(0 0% 98%);
  --muted: hsl(0 0% 78%);
  --outline: hsl(240 6% 22%);
  --accent: hsl(220 90% 66%);
  --shadow: 0 12px 34px hsl(0 0% 0% / .45);
}

/* ===== animated backdrop (single canvas look) ===== */
.bg-anim{
  position: fixed; inset: 0; z-index: -1;
  background: var(--bgImg);
  animation: glow 12s ease-in-out infinite alternate;
}
@keyframes glow {
  from { box-shadow: var(--glow) }
  to   { box-shadow: 0 0 240px 40px hsl(210 100% 60% / .08) inset; }
}

/* ===== Header & Tape ===== */
.fixed-header{
  position: fixed; inset: 0 0 auto 0; height: var(--hdrH); z-index: 60;
  background: var(--surface); border-bottom: 1px solid var(--outline);
  backdrop-filter: saturate(1.1) blur(8px);
}
.header-inner{
  max-width: 1200px; height: 100%; margin: 0 auto; padding: 0 14px;
  display: grid; grid-template-columns: 1fr auto; align-items: center; gap: 10px;
}
.brand{ display: flex; gap: 10px; align-items: baseline }
.brand-big{ font-weight: 800; font-size: clamp(16px, 4.2vw, 24px) }
.brand-small{ font-weight: 600; font-size: clamp(12px, 3.4vw, 14px); color: var(--muted) }
.header-actions{ display: flex; gap: 8px; align-items: center }
.hide-sm{ display: none } .hide-xs{ display: none }
@media (min-width: 480px){ .hide-xs{ display: inline } }
@media (min-width: 640px){ .hide-sm{ display: inline-flex } }

.fixed-tape{
  position: fixed; left: 0; right: 0; top: var(--hdrH); z-index: 50;
  min-height: var(--tapeH);
}
.tv-opaque{ background: var(--surface); border-bottom: 1px solid var(--outline) }

/* ===== Buttons & Inputs ===== */
.btn{
  --bgBtn: var(--surface);
  display: inline-flex; align-items: center; gap: 8px;
  height: 38px; padding: 0 14px; border-radius: 12px;
  border: 1px solid var(--outline); background: var(--bgBtn); color: var(--text);
  cursor: pointer; transition: .15s ease transform, .15s ease box-shadow, .15s ease background;
}
.btn:hover{ box-shadow: 0 8px 20px hsl(0 0% 0% / .08) }
.btn:active{ transform: scale(.98) }
.btn.primary{ --bgBtn: color-mix(in hsl, var(--accent) 92%, white); color: white; border-color: transparent }
.btn.ghost{ background: transparent }
.btn.icon{ width: 38px; justify-content: center; padding: 0 }
.btn.sm{ height: 30px; padding: 0 10px }

.input{
  width: 100%; height: 44px; border-radius: 12px; padding: 0 12px;
  border: 1px solid var(--outline); background: var(--surface); color: var(--text);
  outline: none;
}

/* ===== Content layout ===== */
.page-under-fixed{ padding-top: calc(var(--hdrH) + var(--tapeH) + 18px) }

.panel.glass{
  max-width: 1200px; margin: 18px auto; padding: 18px 14px 22px;
  background: var(--surfGlass); border: 1px solid var(--outline);
  border-radius: var(--radius); box-shadow: var(--shadow);
  backdrop-filter: blur(12px) saturate(1.2);
}

.section.glass-alt{
  max-width: 1200px; margin: 18px auto; padding: 18px 14px 22px;
  background: var(--surfGlassAlt); border: 1px solid var(--outline);
  border-radius: var(--radius); box-shadow: var(--shadow);
  backdrop-filter: blur(10px) saturate(1.1);
}

/* Tidy action area on mobile */
.action-stack{ display: grid; gap: 10px }
.action-row{ display: grid; grid-template-columns: 1fr 1fr; gap: 8px }
@media (min-width: 640px){
  .action-stack{ grid-template-columns: 1fr auto; align-items: start }
  .action-row{ grid-template-columns: auto auto }
}

/* Tabs */
.tabs{ display: flex; gap: 8px; overflow-x: auto; padding-bottom: 4px; }
.tab{
  height: 36px; padding: 0 14px; border-radius: 999px;
  background: var(--surface); border: 1px solid var(--outline); cursor: pointer;
}
.tab.active{ background: color-mix(in hsl, var(--accent) 16%, transparent); border-color: var(--accent) }

/* Snapshot grid */
.grid{
  display: grid; gap: 12px; margin-top: 12px;
  grid-template-columns: repeat(4, 1fr);
}
@media (max-width: 900px){ .grid{ grid-template-columns: repeat(2, 1fr) } }
@media (max-width: 560px){ .grid{ grid-template-columns: 1fr } }

.card{
  background: var(--surface); border: 1px solid var(--outline);
  border-radius: 12px; padding: 14px; box-shadow: var(--shadow);
}
.label{ color: var(--muted); font-weight: 600; margin-bottom: 6px }
.value{ font-size: clamp(18px, 3.6vw, 24px); font-weight: 800 }
.sub{ color: var(--muted); font-size: 12px; margin-top: 6px }
.mono{ font-variant-numeric: tabular-nums }
.up{ color: hsl(147 70% 42%) } .down{ color: hsl(6 80% 55%) }
.footnote{ color: var(--muted); font-size: 12px; margin-top: 10px; display: flex; gap: 6px; align-items: center }
.dot{ width: 8px; height: 8px; border-radius: 50%; background: var(--accent); display: inline-block }

/* News grid */
.news-grid{
  display: grid; gap: 12px; margin-top: 12px;
  grid-template-columns: repeat(3, 1fr);
}
@media (max-width: 900px){ .news-grid{ grid-template-columns: repeat(2, 1fr) } }
@media (max-width: 560px){ .news-grid{ grid-template-columns: 1fr } }
.news{
  text-decoration: none; color: inherit;
  background: var(--surface); border: 1px solid var(--outline); border-radius: 12px;
  padding: 12px; box-shadow: var(--shadow);
}
.news:hover{ outline: 1px solid var(--accent) }
.news-meta{ color: var(--muted); font-size: 12px; margin-bottom: 4px }
.news-title{ font-weight: 800; margin-bottom: 4px }
.news-snippet{ color: var(--muted) }

/* Empty state */
.empty{ text-align: center; padding: 28px 10px }
.empty .emoji{ font-size: 40px }
.empty .title{ font-weight: 800; margin-top: 6px }

/* Footer */
.footer{ background: var(--surface); border-top: 1px solid var(--outline); margin-top: 30px }
.footer-inner{
  max-width: 1200px; margin: 0 auto; padding: 14px;
  display: flex; gap: 10px; align-items: center; justify-content: space-between;
}
.footer-actions{ display: flex; gap: 8px; flex-wrap: wrap }
@media (max-width: 640px){ .footer-inner{ flex-direction: column; align-items: stretch } }

/* Modals */
.modal-dim{
  position: fixed; inset: 0; z-index: 80;
  background: hsl(0 0% 0% / .4); backdrop-filter: blur(10px);
}
.modal-card{
  position: fixed; z-index: 90; left: 0; right: 0; margin: 0 auto;
  top: clamp(56px, 14vh, 140px);
  width: min(680px, calc(100% - 24px));
  background: var(--surface); border: 1px solid var(--outline);
  border-radius: 16px; box-shadow: var(--shadow);
}
.modal-head{ display: flex; align-items: center; justify-content: space-between; padding: 12px 14px; border-bottom: 1px solid var(--outline) }
.modal-head h3{ margin: 0; font-weight: 800 }
.modal-body{ padding: 14px }
.list{ margin: 0; padding-left: 18px }
.list li{ margin: 6px 0 }

/* Accessibility */
:focus-visible{ outline: 2px solid color-mix(in hsl, var(--accent) 60%, white); outline-offset: 2px }

/* Very small phones */
@media (max-width: 380px){
  :root{ --hdrH: 56px; --tapeH: 28px }
  .btn{ height: 36px; padding: 0 10px }
  .btn.primary{ padding: 0 12px }
}
